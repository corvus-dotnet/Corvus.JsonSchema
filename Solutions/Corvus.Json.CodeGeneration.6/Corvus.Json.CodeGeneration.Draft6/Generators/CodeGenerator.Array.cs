//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Corvus.Json.CodeGeneration.Generators.Draft6 {
    using System.Collections.Generic;
    using Corvus.Json;
    using System;
    
    
    public partial class CodeGeneratorArray : CodeGeneratorArrayBase {
        
        
        #line 1123 "CodeGenerator.Array.tt"

    public bool ShouldGenerate
    {
        get
        {
            return IsImplicitArray || IsNotImplicitType;
        }
    }

        #line default
        #line hidden
        
        
        public virtual string TransformText() {
            this.GenerationEnvironment = null;
            
            #line 4 "CodeGenerator.Array.tt"

    // This is only emitted if IsImplicitArray is true
    if(!ShouldGenerate)
    {
        throw new InvalidOperationException("CodeGenerator.Array should not be emitted if IsImplicitArray is false.");
    } 
            
            #line default
            #line hidden
            
            #line 10 "CodeGenerator.Array.tt"
            this.Write(@"//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

#nullable enable

using System.Buffers;
using System.Collections.Immutable;
using System.Runtime.CompilerServices;
using System.Text.Json;
using Corvus.Json;
using Corvus.Json.Internal;

namespace ");
            
            #line default
            #line hidden
            
            #line 28 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Namespace ));
            
            #line default
            #line hidden
            
            #line 28 "CodeGenerator.Array.tt"
            this.Write(";\r\n\r\n");
            
            #line default
            #line hidden
            
            #line 30 "CodeGenerator.Array.tt"
 BeginNesting(); 
            
            #line default
            #line hidden
            
            #line 31 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( FormattedTypeDocumentation ));
            
            #line default
            #line hidden
            
            #line 31 "CodeGenerator.Array.tt"
            this.Write("\r\npublic readonly partial struct ");
            
            #line default
            #line hidden
            
            #line 32 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 32 "CodeGenerator.Array.tt"
            this.Write(" : IJsonArray<");
            
            #line default
            #line hidden
            
            #line 32 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 32 "CodeGenerator.Array.tt"
            this.Write(">\r\n{\r\n    /// <summary>\r\n    /// Gets an empty array.\r\n    /// </summary>\r\n    pu" +
                    "blic static readonly ");
            
            #line default
            #line hidden
            
            #line 37 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 37 "CodeGenerator.Array.tt"
            this.Write(" EmptyArray = From(ImmutableList<JsonAny>.Empty);\r\n\r\n    /// <summary>\r\n    /// I" +
                    "nitializes a new instance of the <see cref=\"");
            
            #line default
            #line hidden
            
            #line 40 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 40 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value\">The value from which" +
                    " to construct the instance.</param>\r\n    public ");
            
            #line default
            #line hidden
            
            #line 43 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 43 "CodeGenerator.Array.tt"
            this.Write("(ImmutableList<JsonAny> value)\r\n    {\r\n        this.jsonElementBacking = default;" +
                    "\r\n        this.backing = Backing.Array;\r\n");
            
            #line default
            #line hidden
            
            #line 47 "CodeGenerator.Array.tt"
  if(IsImplicitString || IsNotImplicitType)
    { 
            
            #line default
            #line hidden
            
            #line 49 "CodeGenerator.Array.tt"
            this.Write("        this.stringBacking = string.Empty;\r\n");
            
            #line default
            #line hidden
            
            #line 50 "CodeGenerator.Array.tt"
  }
    if (IsImplicitBoolean && !(IsImplicitNumber || IsNotImplicitType))
    { 
            
            #line default
            #line hidden
            
            #line 53 "CodeGenerator.Array.tt"
            this.Write("        this.boolBacking = default;\r\n");
            
            #line default
            #line hidden
            
            #line 54 "CodeGenerator.Array.tt"
  }
    if(IsImplicitNumber || IsNotImplicitType)
    { 
            
            #line default
            #line hidden
            
            #line 57 "CodeGenerator.Array.tt"
            this.Write("        this.numberBacking = default;\r\n");
            
            #line default
            #line hidden
            
            #line 58 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 59 "CodeGenerator.Array.tt"
            this.Write("        this.arrayBacking = value;\r\n");
            
            #line default
            #line hidden
            
            #line 60 "CodeGenerator.Array.tt"
  if(IsImplicitObject || IsNotImplicitType)
    { 
            
            #line default
            #line hidden
            
            #line 62 "CodeGenerator.Array.tt"
            this.Write("        this.objectBacking = ImmutableList<JsonObjectProperty>.Empty;\r\n");
            
            #line default
            #line hidden
            
            #line 63 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 64 "CodeGenerator.Array.tt"
            this.Write("    }\r\n\r\n    /// <summary>\r\n    /// Initializes a new instance of the <see cref=\"" +
                    "");
            
            #line default
            #line hidden
            
            #line 67 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 67 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value\">The value from which" +
                    " to construct the instance.</param>\r\n    public ");
            
            #line default
            #line hidden
            
            #line 70 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 70 "CodeGenerator.Array.tt"
            this.Write("(IEnumerable<JsonAny> value)\r\n    {\r\n        this.jsonElementBacking = default;\r\n" +
                    "        this.backing = Backing.Array;\r\n");
            
            #line default
            #line hidden
            
            #line 74 "CodeGenerator.Array.tt"
  if(IsImplicitString || IsNotImplicitType)
    { 
            
            #line default
            #line hidden
            
            #line 76 "CodeGenerator.Array.tt"
            this.Write("        this.stringBacking = string.Empty;\r\n");
            
            #line default
            #line hidden
            
            #line 77 "CodeGenerator.Array.tt"
  }
    if(IsImplicitBoolean && !(IsImplicitNumber || IsNotImplicitType))
    { 
            
            #line default
            #line hidden
            
            #line 80 "CodeGenerator.Array.tt"
            this.Write("        this.boolBacking = default;\r\n");
            
            #line default
            #line hidden
            
            #line 81 "CodeGenerator.Array.tt"
  }
    if(IsImplicitNumber || IsNotImplicitType)
    { 
            
            #line default
            #line hidden
            
            #line 84 "CodeGenerator.Array.tt"
            this.Write("        this.numberBacking = default;\r\n");
            
            #line default
            #line hidden
            
            #line 85 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 86 "CodeGenerator.Array.tt"
            this.Write("        this.arrayBacking = value.ToImmutableList();\r\n");
            
            #line default
            #line hidden
            
            #line 87 "CodeGenerator.Array.tt"
  if(IsImplicitObject || IsNotImplicitType)
    { 
            
            #line default
            #line hidden
            
            #line 89 "CodeGenerator.Array.tt"
            this.Write("        this.objectBacking = ImmutableList<JsonObjectProperty>.Empty;\r\n");
            
            #line default
            #line hidden
            
            #line 90 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 91 "CodeGenerator.Array.tt"
            this.Write("    }\r\n\r\n");
            
            #line default
            #line hidden
            
            #line 93 "CodeGenerator.Array.tt"
  if (!CanEnumerateAsSpecificType && !IsTuple)
    { 
            
            #line default
            #line hidden
            
            #line 95 "CodeGenerator.Array.tt"
            this.Write(@"    /// <inheritdoc/>
    public JsonAny this[int index]
    {
        get
        {
            if ((this.backing & Backing.JsonElement) != 0)
            {
                return new JsonAny(this.jsonElementBacking[index]);
            }

            if ((this.backing & Backing.Array) != 0)
            {
                try
                {
                    return this.arrayBacking[index];
                }
                catch (ArgumentOutOfRangeException ex)
                {
                    throw new IndexOutOfRangeException(ex.Message, ex);
                }
            }

            throw new InvalidOperationException();
        }
    }
");
            
            #line default
            #line hidden
            
            #line 120 "CodeGenerator.Array.tt"
  }
    else
    { 
            
            #line default
            #line hidden
            
            #line 123 "CodeGenerator.Array.tt"
            this.Write("    /// <inheritdoc/>\r\n    JsonAny IJsonArray<");
            
            #line default
            #line hidden
            
            #line 124 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 124 "CodeGenerator.Array.tt"
            this.Write(@">.this[int index]
    {
        get
        {
            if ((this.backing & Backing.JsonElement) != 0)
            {
                return new JsonAny(this.jsonElementBacking[index]);
            }

            if ((this.backing & Backing.Array) != 0)
            {
                try
                {
                    return this.arrayBacking[index];
                }
                catch (ArgumentOutOfRangeException ex)
                {
                    throw new IndexOutOfRangeException(ex.Message, ex);
                }
            }

            throw new InvalidOperationException();
        }
    }

");
            
            #line default
            #line hidden
            
            #line 149 "CodeGenerator.Array.tt"
      if(CanEnumerateAsSpecificType)
        {
            
            #line default
            #line hidden
            
            #line 151 "CodeGenerator.Array.tt"
            this.Write(@"    /// <summary>
    /// Gets the item at the given index.
    /// </summary>
    /// <param name=""index"">The index at which to retrieve the item.</param>
    /// <returns>The item at the given index.</returns>
    /// <exception cref=""IndexOutOfRangeException"">The index was outside the bounds of the array.</exception>
    /// <exception cref=""InvalidOperationException"">The value is not an array.</exception>
    public ");
            
            #line default
            #line hidden
            
            #line 158 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 158 "CodeGenerator.Array.tt"
            this.Write(" this[int index]\r\n    {\r\n        get\r\n        {\r\n            if ((this.backing & " +
                    "Backing.JsonElement) != 0)\r\n            {\r\n                return new ");
            
            #line default
            #line hidden
            
            #line 164 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 164 "CodeGenerator.Array.tt"
            this.Write("(this.jsonElementBacking[index]);\r\n            }\r\n\r\n            if ((this.backing" +
                    " & Backing.Array) != 0)\r\n            {\r\n                try\r\n                {\r\n" +
                    "                    return this.arrayBacking[index].As<");
            
            #line default
            #line hidden
            
            #line 171 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 171 "CodeGenerator.Array.tt"
            this.Write(@">();
                }
                catch (ArgumentOutOfRangeException ex)
                {
                    throw new IndexOutOfRangeException(ex.Message, ex);
                }
            }

            throw new InvalidOperationException();
        }
    }
");
            
            #line default
            #line hidden
            
            #line 182 "CodeGenerator.Array.tt"
      }
    }

    if (IsTuple)
    { 
            
            #line default
            #line hidden
            
            #line 187 "CodeGenerator.Array.tt"
            this.Write("\r\n");
            
            #line default
            #line hidden
            
            #line 188 "CodeGenerator.Array.tt"
      int prefixItemAccessorIndex = 1;

        foreach(var prefixItem in PrefixItems)
        { 
            
            #line default
            #line hidden
            
            #line 192 "CodeGenerator.Array.tt"
            this.Write("\r\n    /// <summary>\r\n    /// Gets the tuple item as a <see cref=\"");
            
            #line default
            #line hidden
            
            #line 194 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 194 "CodeGenerator.Array.tt"
            this.Write("\"/>.\r\n    /// </summary>\r\n    public ");
            
            #line default
            #line hidden
            
            #line 196 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 196 "CodeGenerator.Array.tt"
            this.Write(" Item");
            
            #line default
            #line hidden
            
            #line 196 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItemAccessorIndex ));
            
            #line default
            #line hidden
            
            #line 196 "CodeGenerator.Array.tt"
            this.Write("\r\n    {\r\n        get\r\n        {\r\n            if ((this.backing & Backing.JsonElem" +
                    "ent) != 0)\r\n            {\r\n                return new ");
            
            #line default
            #line hidden
            
            #line 202 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 202 "CodeGenerator.Array.tt"
            this.Write("(this.jsonElementBacking[");
            
            #line default
            #line hidden
            
            #line 202 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItemAccessorIndex - 1));
            
            #line default
            #line hidden
            
            #line 202 "CodeGenerator.Array.tt"
            this.Write("]);\r\n            }\r\n\r\n            if ((this.backing & Backing.Array) != 0)\r\n     " +
                    "       {\r\n                try\r\n                {\r\n                    return thi" +
                    "s.arrayBacking[");
            
            #line default
            #line hidden
            
            #line 209 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItemAccessorIndex - 1));
            
            #line default
            #line hidden
            
            #line 209 "CodeGenerator.Array.tt"
            this.Write("].As<");
            
            #line default
            #line hidden
            
            #line 209 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 209 "CodeGenerator.Array.tt"
            this.Write(@">();
                }
                catch (ArgumentOutOfRangeException ex)
                {
                    throw new IndexOutOfRangeException(ex.Message, ex);
                }
            }

            throw new InvalidOperationException();
        }
    }
");
            
            #line default
            #line hidden
            
            #line 220 "CodeGenerator.Array.tt"
          prefixItemAccessorIndex++;
        }
    }
    
    if (IsTuple && PrefixItems.Length > 1)
    { 
            
            #line default
            #line hidden
            
            #line 226 "CodeGenerator.Array.tt"
            this.Write("\r\n    /// <summary>\r\n    /// Conversion to tuple.\r\n    /// </summary>\r\n    /// <p" +
                    "aram name=\"value\">The value from which to convert.</param>\r\n    public static im" +
                    "plicit operator (");
            
            #line default
            #line hidden
            
            #line 231 "CodeGenerator.Array.tt"
 int prefixItemIndexA = 1; foreach(var prefixItem in PrefixItems) { 
            
            #line default
            #line hidden
            
            #line 232 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(  prefixItemIndexA++ > 1 ? ", " : "" ));
            
            #line default
            #line hidden
            
            #line 232 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 232 "CodeGenerator.Array.tt"
 } 
            
            #line default
            #line hidden
            
            #line 233 "CodeGenerator.Array.tt"
            this.Write(")(");
            
            #line default
            #line hidden
            
            #line 233 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 233 "CodeGenerator.Array.tt"
            this.Write(" value)\r\n    {\r\n       return (");
            
            #line default
            #line hidden
            
            #line 235 "CodeGenerator.Array.tt"
 int prefixItemIndexB = 1; foreach(var prefixItem in PrefixItems) { 
            
            #line default
            #line hidden
            
            #line 236 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(  prefixItemIndexB > 1 ? ", " : "" ));
            
            #line default
            #line hidden
            
            #line 236 "CodeGenerator.Array.tt"
            this.Write("value.Item");
            
            #line default
            #line hidden
            
            #line 236 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItemIndexB++ ));
            
            #line default
            #line hidden
            
            #line 236 "CodeGenerator.Array.tt"
 }
            
            #line default
            #line hidden
            
            #line 237 "CodeGenerator.Array.tt"
            this.Write(");\r\n    }\r\n\r\n    /// <summary>\r\n    /// Conversion from tuple.\r\n    /// </summary" +
                    ">\r\n    /// <param name=\"value\">The value from which to convert.</param>\r\n    pub" +
                    "lic static implicit operator ");
            
            #line default
            #line hidden
            
            #line 244 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 244 "CodeGenerator.Array.tt"
            this.Write("((");
            
            #line default
            #line hidden
            
            #line 244 "CodeGenerator.Array.tt"
 int prefixItemIndexD = 1; foreach(var prefixItem in PrefixItems) { 
            
            #line default
            #line hidden
            
            #line 245 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(  prefixItemIndexD++ > 1 ? ", " : "" ));
            
            #line default
            #line hidden
            
            #line 245 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 245 "CodeGenerator.Array.tt"
 } 
            
            #line default
            #line hidden
            
            #line 246 "CodeGenerator.Array.tt"
            this.Write(") value)\r\n    {\r\n        return ");
            
            #line default
            #line hidden
            
            #line 248 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 248 "CodeGenerator.Array.tt"
            this.Write(".Create(");
            
            #line default
            #line hidden
            
            #line 248 "CodeGenerator.Array.tt"
 int prefixItemIndexC = 1; foreach(var prefixItem in PrefixItems) { 
            
            #line default
            #line hidden
            
            #line 249 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(  prefixItemIndexC > 1 ? ", " : "" ));
            
            #line default
            #line hidden
            
            #line 249 "CodeGenerator.Array.tt"
            this.Write("value.Item");
            
            #line default
            #line hidden
            
            #line 249 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItemIndexC++ ));
            
            #line default
            #line hidden
            
            #line 249 "CodeGenerator.Array.tt"
 }
            
            #line default
            #line hidden
            
            #line 250 "CodeGenerator.Array.tt"
            this.Write(");\r\n    }\r\n\r\n");
            
            #line default
            #line hidden
            
            #line 253 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 254 "CodeGenerator.Array.tt"
            this.Write("\r\n    /// <summary>\r\n    /// Conversion from immutable list.\r\n    /// </summary>\r" +
                    "\n    /// <param name=\"value\">The value from which to convert.</param>\r\n    publi" +
                    "c static implicit operator ImmutableList<JsonAny>(");
            
            #line default
            #line hidden
            
            #line 259 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 259 "CodeGenerator.Array.tt"
            this.Write(" value)\r\n    {\r\n        return value.GetImmutableList();\r\n    }\r\n\r\n    /// <summa" +
                    "ry>s\r\n    /// Conversion to immutable list.\r\n    /// </summary>\r\n    /// <param " +
                    "name=\"value\">The value from which to convert.</param>\r\n    public static implici" +
                    "t operator ");
            
            #line default
            #line hidden
            
            #line 268 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 268 "CodeGenerator.Array.tt"
            this.Write(@"(ImmutableList<JsonAny> value)
    {
        return new(value);
    }

    /// <summary>
    /// Conversion from JsonArray.
    /// </summary>
    /// <param name=""value"">The value from which to convert.</param>
    public static implicit operator ");
            
            #line default
            #line hidden
            
            #line 277 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 277 "CodeGenerator.Array.tt"
            this.Write(@"(JsonArray value)
    {
        if (value.HasDotnetBacking && value.ValueKind == JsonValueKind.Array)
        {
            return new(value.AsImmutableList());
        }

        return new(value.AsJsonElement);
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 288 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 288 "CodeGenerator.Array.tt"
            this.Write(@"""/> struct.
    /// </summary>
    /// <param name=""items"">The list of items from which to construct the array.</param>
    /// <returns>An instance of the array constructed from the list.</returns>
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static ");
            
            #line default
            #line hidden
            
            #line 293 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 293 "CodeGenerator.Array.tt"
            this.Write(" From(ImmutableList<JsonAny> items)\r\n    {\r\n        return new(items);\r\n    }\r\n\r\n" +
                    "");
            
            #line default
            #line hidden
            
            #line 298 "CodeGenerator.Array.tt"
  if (!CanEnumerateAsSpecificType && !IsTuple)
    { 
            
            #line default
            #line hidden
            
            #line 300 "CodeGenerator.Array.tt"
            this.Write("    /// <summary>\r\n    /// Create an array from the span of items.\r\n    /// </sum" +
                    "mary>\r\n    /// <param name=\"items\">The items from which to create the array.</pa" +
                    "ram>\r\n    /// <returns>The array containing the items.</returns>\r\n    public sta" +
                    "tic ");
            
            #line default
            #line hidden
            
            #line 305 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 305 "CodeGenerator.Array.tt"
            this.Write(" Create(ReadOnlySpan<JsonAny> items)\r\n    {\r\n        return new([..items]);\r\n    " +
                    "}\r\n\r\n    /// <summary>\r\n    /// Initializes a new instance of the <see cref=\"");
            
            #line default
            #line hidden
            
            #line 311 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 311 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value\">The value from which" +
                    " to construct the instance.</param>\r\n    /// <returns>A JsonAny instantiated fro" +
                    "m the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 315 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 315 "CodeGenerator.Array.tt"
            this.Write(" FromItems(params JsonAny[] value)\r\n    {\r\n        return new(value.ToImmutableLi" +
                    "st());\r\n    }\r\n\r\n    /// <summary>\r\n    /// Initializes a new instance of the <s" +
                    "ee cref=\"");
            
            #line default
            #line hidden
            
            #line 321 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 321 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <typeparam name=\"TItem\">The type of the " +
                    "items in the list.</typeparam>\r\n    /// <param name=\"value\">The value from which" +
                    " to construct the instance.</param>\r\n    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 325 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 325 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 326 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 326 "CodeGenerator.Array.tt"
            this.Write(@" FromItems<TItem>(params TItem[] value)
        where TItem : struct, IJsonValue<TItem>
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (TItem item in value)
        {
            builder.Add(item.AsAny);
        }

        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 339 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 339 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <typeparam name=\"TItem1\">The type of the" +
                    " items in the list.</typeparam>\r\n    /// <param name=\"value1\">The first value fr" +
                    "om which to construct the instance.</param>\r\n    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 343 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 343 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 344 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 344 "CodeGenerator.Array.tt"
            this.Write(@" FromItems<TItem1>(in TItem1 value1)
        where TItem1 : struct, IJsonValue<TItem1>
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1.AsAny);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 353 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 353 "CodeGenerator.Array.tt"
            this.Write(@"""/> struct.
    /// </summary>
    /// <typeparam name=""TItem1"">The type of the first item in the list.</typeparam>
    /// <typeparam name=""TItem2"">The type of the second item in the list.</typeparam>
    /// <param name=""value1"">The first value from which to construct the instance.</param>
    /// <param name=""value2"">The second value from which to construct the instance.</param>
    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 359 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 359 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 360 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 360 "CodeGenerator.Array.tt"
            this.Write(@" FromItems<TItem1, TItem2>(in TItem1 value1, in TItem2 value2)
        where TItem1 : struct, IJsonValue<TItem1>
        where TItem2 : struct, IJsonValue<TItem2>
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1.AsAny);
        builder.Add(value2.AsAny);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 371 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 371 "CodeGenerator.Array.tt"
            this.Write(@"""/> struct.
    /// </summary>
    /// <typeparam name=""TItem1"">The type of the first item in the list.</typeparam>
    /// <typeparam name=""TItem2"">The type of the second item in the list.</typeparam>
    /// <typeparam name=""TItem3"">The type of the third item in the list.</typeparam>
    /// <param name=""value1"">The first value from which to construct the instance.</param>
    /// <param name=""value2"">The second value from which to construct the instance.</param>
    /// <param name=""value3"">The thirdvalue from which to construct the instance.</param>
    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 379 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 379 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 380 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 380 "CodeGenerator.Array.tt"
            this.Write(@" FromItems<TItem1, TItem2, TItem3>(in TItem1 value1, in TItem2 value2, in TItem3 value3)
        where TItem1 : struct, IJsonValue<TItem1>
        where TItem2 : struct, IJsonValue<TItem2>
        where TItem3 : struct, IJsonValue<TItem3>
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1.AsAny);
        builder.Add(value2.AsAny);
        builder.Add(value3.AsAny);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <typeparam name=""T"">The type of the <paramref name=""items""/> from which to create the array.</typeparam>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    public static ");
            
            #line default
            #line hidden
            
            #line 402 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 402 "CodeGenerator.Array.tt"
            this.Write(@" From<T>(IEnumerable<T> items)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (T item in items)
        {
            var abw = new ArrayBufferWriter<byte>();
            using var writer = new Utf8JsonWriter(abw);
            JsonSerializer.Serialize(writer, item);
            writer.Flush();
            builder.Add(JsonAny.Parse(abw.WrittenMemory));
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 414 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 414 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name = ""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    public static ");
            
            #line default
            #line hidden
            
            #line 426 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 426 "CodeGenerator.Array.tt"
            this.Write(" FromRange(IEnumerable<JsonAny> items)\r\n    {\r\n        ImmutableList<JsonAny>.Bui" +
                    "lder builder = ImmutableList.CreateBuilder<JsonAny>();\r\n        foreach (JsonAny" +
                    " item in items)\r\n        {\r\n            builder.Add(item);\r\n        }\r\n\r\n       " +
                    " return new ");
            
            #line default
            #line hidden
            
            #line 434 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 434 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name = ""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    public static ");
            
            #line default
            #line hidden
            
            #line 446 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 446 "CodeGenerator.Array.tt"
            this.Write(@" FromRange<T>(IEnumerable<T> items)
        where T : struct, IJsonValue<T>
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (T item in items)
        {
            builder.Add(item.AsAny);
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 455 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 455 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    public static ");
            
            #line default
            #line hidden
            
            #line 463 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 463 "CodeGenerator.Array.tt"
            this.Write(@" FromRange(IEnumerable<string> items)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (string item in items)
        {
            builder.Add((JsonAny)item);
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 471 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 471 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    public static ");
            
            #line default
            #line hidden
            
            #line 479 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 479 "CodeGenerator.Array.tt"
            this.Write(@" FromRange(IEnumerable<double> items)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (double item in items)
        {
            builder.Add((JsonAny)item);
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 487 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 487 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    public static ");
            
            #line default
            #line hidden
            
            #line 495 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 495 "CodeGenerator.Array.tt"
            this.Write(@" FromRange(IEnumerable<float> items)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (float item in items)
        {
            builder.Add((JsonAny)item);
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 503 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 503 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    public static ");
            
            #line default
            #line hidden
            
            #line 511 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 511 "CodeGenerator.Array.tt"
            this.Write(" FromRange(IEnumerable<int> items)\r\n    {\r\n        ImmutableList<JsonAny>.Builder" +
                    " builder = ImmutableList.CreateBuilder<JsonAny>();\r\n        foreach (int item in" +
                    " items)\r\n        {\r\n            builder.Add((JsonAny)item);\r\n        }\r\n\r\n      " +
                    "  return new ");
            
            #line default
            #line hidden
            
            #line 519 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 519 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    public static ");
            
            #line default
            #line hidden
            
            #line 527 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 527 "CodeGenerator.Array.tt"
            this.Write(@" FromRange(IEnumerable<long> items)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (long item in items)
        {
            builder.Add((JsonAny)item);
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 535 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 535 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    public static ");
            
            #line default
            #line hidden
            
            #line 543 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 543 "CodeGenerator.Array.tt"
            this.Write(@" FromRange(IEnumerable<bool> items)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (bool item in items)
        {
            builder.Add((JsonAny)item);
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 551 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 551 "CodeGenerator.Array.tt"
            this.Write("(builder.ToImmutable());\r\n    }\r\n\r\n    /// <summary>\r\n    /// Initializes a new i" +
                    "nstance of the <see cref=\"");
            
            #line default
            #line hidden
            
            #line 555 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 555 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value1\">The first value fro" +
                    "m which to construct the instance.</param>\r\n    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 558 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 558 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 559 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 559 "CodeGenerator.Array.tt"
            this.Write(@" FromItems(in JsonAny value1)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 567 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 567 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value1\">The first value fro" +
                    "m which to construct the instance.</param>\r\n    /// <param name=\"value2\">The sec" +
                    "ond value from which to construct the instance.</param>\r\n    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 571 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 571 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 572 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 572 "CodeGenerator.Array.tt"
            this.Write(@" FromItems(in JsonAny value1, in JsonAny value2)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1);
        builder.Add(value2);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 581 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 581 "CodeGenerator.Array.tt"
            this.Write(@"""/> struct.
    /// </summary>
    /// <param name=""value1"">The first value from which to construct the instance.</param>
    /// <param name=""value2"">The second value from which to construct the instance.</param>
    /// <param name=""value3"">The thirdvalue from which to construct the instance.</param>
    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 586 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 586 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 587 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 587 "CodeGenerator.Array.tt"
            this.Write(@" FromItems(in JsonAny value1, in JsonAny value2, in JsonAny value3)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1);
        builder.Add(value2);
        builder.Add(value3);
        return new(builder.ToImmutable());
    }
");
            
            #line default
            #line hidden
            
            #line 595 "CodeGenerator.Array.tt"
  }
    else if (!IsTuple)
    {
            
            #line default
            #line hidden
            
            #line 598 "CodeGenerator.Array.tt"
            this.Write("    /// <summary>\r\n    /// Create an array from the span of items.\r\n    /// </sum" +
                    "mary>\r\n    /// <param name=\"items\">The items from which to create the array.</pa" +
                    "ram>\r\n    /// <returns>The array containing the items.</returns>\r\n    public sta" +
                    "tic ");
            
            #line default
            #line hidden
            
            #line 603 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 603 "CodeGenerator.Array.tt"
            this.Write(" Create(ReadOnlySpan<");
            
            #line default
            #line hidden
            
            #line 603 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 603 "CodeGenerator.Array.tt"
            this.Write("> items)\r\n    {\r\n        return new([..items]);\r\n    }\r\n\r\n    /// <summary>\r\n    " +
                    "/// Initializes a new instance of the <see cref=\"");
            
            #line default
            #line hidden
            
            #line 609 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 609 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value1\">The first value fro" +
                    "m which to construct the instance.</param>\r\n    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 612 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 612 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 613 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 613 "CodeGenerator.Array.tt"
            this.Write(" FromItems(in ");
            
            #line default
            #line hidden
            
            #line 613 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 613 "CodeGenerator.Array.tt"
            this.Write(@" value1)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1.AsAny);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 621 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 621 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value1\">The first value fro" +
                    "m which to construct the instance.</param>\r\n    /// <param name=\"value2\">The sec" +
                    "ond value from which to construct the instance.</param>\r\n    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 625 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 625 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 626 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 626 "CodeGenerator.Array.tt"
            this.Write(" FromItems(in ");
            
            #line default
            #line hidden
            
            #line 626 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 626 "CodeGenerator.Array.tt"
            this.Write(" value1, in ");
            
            #line default
            #line hidden
            
            #line 626 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 626 "CodeGenerator.Array.tt"
            this.Write(@" value2)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1.AsAny);
        builder.Add(value2.AsAny);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 635 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 635 "CodeGenerator.Array.tt"
            this.Write(@"""/> struct.
    /// </summary>
    /// <param name=""value1"">The first value from which to construct the instance.</param>
    /// <param name=""value2"">The second value from which to construct the instance.</param>
    /// <param name=""value3"">The thirdvalue from which to construct the instance.</param>
    /// <returns>A ");
            
            #line default
            #line hidden
            
            #line 640 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 640 "CodeGenerator.Array.tt"
            this.Write(" instantiated from the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(" FromItems(in ");
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(" value1, in ");
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(" value2, in ");
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 641 "CodeGenerator.Array.tt"
            this.Write(@" value3)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        builder.Add(value1.AsAny);
        builder.Add(value2.AsAny);
        builder.Add(value3.AsAny);
        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Initializes a new instance of the <see cref=""");
            
            #line default
            #line hidden
            
            #line 651 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 651 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value\">The value from which" +
                    " to construct the instance.</param>\r\n    /// <returns>A JsonAny instantiated fro" +
                    "m the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 655 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 655 "CodeGenerator.Array.tt"
            this.Write(" FromItems(params ");
            
            #line default
            #line hidden
            
            #line 655 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 655 "CodeGenerator.Array.tt"
            this.Write("[] value)\r\n    {\r\n        ImmutableList<JsonAny>.Builder builder = ImmutableList." +
                    "CreateBuilder<JsonAny>();\r\n        foreach (");
            
            #line default
            #line hidden
            
            #line 658 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 658 "CodeGenerator.Array.tt"
            this.Write(" item in value)\r\n        {\r\n            builder.Add(item.AsAny);\r\n        }\r\n\r\n  " +
                    "      return new(builder.ToImmutable());\r\n    }\r\n\r\n    /// <summary>\r\n    /// In" +
                    "itializes a new instance of the <see cref=\"");
            
            #line default
            #line hidden
            
            #line 667 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 667 "CodeGenerator.Array.tt"
            this.Write("\"/> struct.\r\n    /// </summary>\r\n    /// <param name=\"value\">The value from which" +
                    " to construct the instance.</param>\r\n    /// <returns>A JsonAny instantiated fro" +
                    "m the given items.</returns>\r\n    public static ");
            
            #line default
            #line hidden
            
            #line 671 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 671 "CodeGenerator.Array.tt"
            this.Write(" FromRange(IEnumerable<");
            
            #line default
            #line hidden
            
            #line 671 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 671 "CodeGenerator.Array.tt"
            this.Write("> value)\r\n    {\r\n        ImmutableList<JsonAny>.Builder builder = ImmutableList.C" +
                    "reateBuilder<JsonAny>();\r\n        foreach (");
            
            #line default
            #line hidden
            
            #line 674 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 674 "CodeGenerator.Array.tt"
            this.Write(@" item in value)
        {
            builder.Add(item.AsAny);
        }

        return new(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <typeparam name=""T"">The type of the <paramref name=""items""/> from which to create the array.</typeparam>
    /// <param name=""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    public static ");
            
            #line default
            #line hidden
            
            #line 692 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 692 "CodeGenerator.Array.tt"
            this.Write(@" From<T>(IEnumerable<T> items)
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (T item in items)
        {
            var abw = new ArrayBufferWriter<byte>();
            using var writer = new Utf8JsonWriter(abw);
            JsonSerializer.Serialize(writer, item);
            writer.Flush();
            builder.Add(JsonAny.Parse(abw.WrittenMemory));
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 704 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 704 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name = ""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    public static ");
            
            #line default
            #line hidden
            
            #line 716 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 716 "CodeGenerator.Array.tt"
            this.Write(" FromRange(IEnumerable<JsonAny> items)\r\n    {\r\n        ImmutableList<JsonAny>.Bui" +
                    "lder builder = ImmutableList.CreateBuilder<JsonAny>();\r\n        foreach (JsonAny" +
                    " item in items)\r\n        {\r\n            builder.Add(item);\r\n        }\r\n\r\n       " +
                    " return new ");
            
            #line default
            #line hidden
            
            #line 724 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 724 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name = ""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    public static ");
            
            #line default
            #line hidden
            
            #line 736 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 736 "CodeGenerator.Array.tt"
            this.Write(@" FromRange<T>(IEnumerable<T> items)
        where T : struct, IJsonValue<T>
    {
        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAny>();
        foreach (T item in items)
        {
            builder.Add(item.AsAny);
        }

        return new ");
            
            #line default
            #line hidden
            
            #line 745 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 745 "CodeGenerator.Array.tt"
            this.Write("(builder.ToImmutable());\r\n    }\r\n");
            
            #line default
            #line hidden
            
            #line 747 "CodeGenerator.Array.tt"
  }
    else
    { 
            
            #line default
            #line hidden
            
            #line 750 "CodeGenerator.Array.tt"
            this.Write(@"#if NET8_0_OR_GREATER
    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name = ""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    static ");
            
            #line default
            #line hidden
            
            #line 760 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 760 "CodeGenerator.Array.tt"
            this.Write(" IJsonArray<");
            
            #line default
            #line hidden
            
            #line 760 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 760 "CodeGenerator.Array.tt"
            this.Write(">.FromRange(IEnumerable<JsonAny> items)\r\n    {\r\n        ImmutableList<JsonAny>.Bu" +
                    "ilder builder = ImmutableList.CreateBuilder<JsonAny>();\r\n        foreach (JsonAn" +
                    "y item in items)\r\n        {\r\n            builder.Add(item);\r\n        }\r\n\r\n      " +
                    "  return new ");
            
            #line default
            #line hidden
            
            #line 768 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 768 "CodeGenerator.Array.tt"
            this.Write(@"(builder.ToImmutable());
    }

    /// <summary>
    /// Create an array from the given items.
    /// </summary>
    /// <param name = ""items"">The items from which to create the array.</param>
    /// <returns>The new array created from the items.</returns>
    /// <remarks>
    /// This will serialize the items to create the underlying JsonArray. Note the
    /// other overloads which avoid this serialization step.
    /// </remarks>
    static ");
            
            #line default
            #line hidden
            
            #line 780 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 780 "CodeGenerator.Array.tt"
            this.Write(" IJsonArray<");
            
            #line default
            #line hidden
            
            #line 780 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 780 "CodeGenerator.Array.tt"
            this.Write(">.FromRange<T>(IEnumerable<T> items)\r\n    {\r\n        ImmutableList<JsonAny>.Build" +
                    "er builder = ImmutableList.CreateBuilder<JsonAny>();\r\n        foreach (T item in" +
                    " items)\r\n        {\r\n            builder.Add(item.AsAny);\r\n        }\r\n\r\n        r" +
                    "eturn new ");
            
            #line default
            #line hidden
            
            #line 788 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 788 "CodeGenerator.Array.tt"
            this.Write("(builder.ToImmutable());\r\n    }\r\n#endif\r\n");
            
            #line default
            #line hidden
            
            #line 791 "CodeGenerator.Array.tt"
  }

    if (IsTuple)
    { 
            
            #line default
            #line hidden
            
            #line 795 "CodeGenerator.Array.tt"
            this.Write("\r\n    /// <summary>\r\n    /// Create a tuple from the given items.\r\n    /// </summ" +
                    "ary>\r\n");
            
            #line default
            #line hidden
            
            #line 799 "CodeGenerator.Array.tt"
      int prefixItemIndex = 1;

        foreach(var prefixItem in PrefixItems)
        { 
            
            #line default
            #line hidden
            
            #line 803 "CodeGenerator.Array.tt"
            this.Write("    /// <param name = \"item");
            
            #line default
            #line hidden
            
            #line 803 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItemIndex++ ));
            
            #line default
            #line hidden
            
            #line 803 "CodeGenerator.Array.tt"
            this.Write("\">An instance of a <see cref=\"");
            
            #line default
            #line hidden
            
            #line 803 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 803 "CodeGenerator.Array.tt"
            this.Write("\" />.</param>\r\n");
            
            #line default
            #line hidden
            
            #line 804 "CodeGenerator.Array.tt"
      }
            
            #line default
            #line hidden
            
            #line 805 "CodeGenerator.Array.tt"
            this.Write("    /// <returns>The new tuple created from the items.</returns>\r\n    public stat" +
                    "ic ");
            
            #line default
            #line hidden
            
            #line 806 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 806 "CodeGenerator.Array.tt"
            this.Write(" Create(");
            
            #line default
            #line hidden
            
            #line 806 "CodeGenerator.Array.tt"
 int prefixItemIndex2 = 1; foreach(var prefixItem in PrefixItems) { 
            
            #line default
            #line hidden
            
            #line 807 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(  prefixItemIndex2 > 1 ? ", " : "" ));
            
            #line default
            #line hidden
            
            #line 807 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItem ));
            
            #line default
            #line hidden
            
            #line 807 "CodeGenerator.Array.tt"
            this.Write(" item");
            
            #line default
            #line hidden
            
            #line 807 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(  prefixItemIndex2++ ));
            
            #line default
            #line hidden
            
            #line 807 "CodeGenerator.Array.tt"
 }
            
            #line default
            #line hidden
            
            #line 808 "CodeGenerator.Array.tt"
            this.Write(")\r\n    {\r\n        ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBu" +
                    "ilder<JsonAny>();\r\n");
            
            #line default
            #line hidden
            
            #line 811 "CodeGenerator.Array.tt"
      int prefixItemIndex3 = 1;
        foreach(var prefixItem in PrefixItems)
        { 
            
            #line default
            #line hidden
            
            #line 814 "CodeGenerator.Array.tt"
            this.Write("        builder.Add(item");
            
            #line default
            #line hidden
            
            #line 814 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( prefixItemIndex3++ ));
            
            #line default
            #line hidden
            
            #line 814 "CodeGenerator.Array.tt"
            this.Write(".AsAny);\r\n");
            
            #line default
            #line hidden
            
            #line 815 "CodeGenerator.Array.tt"
      }
            
            #line default
            #line hidden
            
            #line 816 "CodeGenerator.Array.tt"
            this.Write("\r\n        return new ");
            
            #line default
            #line hidden
            
            #line 817 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 817 "CodeGenerator.Array.tt"
            this.Write("(builder.ToImmutable());\r\n    }\r\n");
            
            #line default
            #line hidden
            
            #line 819 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 820 "CodeGenerator.Array.tt"
            this.Write(@"
    /// <inheritdoc/>
    public ImmutableList<JsonAny> AsImmutableList()
    {
        return this.GetImmutableList();
    }

    /// <inheritdoc/>
    public ImmutableList<JsonAny>.Builder AsImmutableListBuilder()
    {
        return this.GetImmutableListBuilder();
    }


    /// <inheritdoc/>
    public int GetArrayLength()
    {
        if ((this.backing & Backing.JsonElement) != 0)
        {
            return this.jsonElementBacking.GetArrayLength();
        }

        if ((this.backing & Backing.Array) != 0)
        {
            return this.arrayBacking.Count;
        }

        return 0;
    }

");
            
            #line default
            #line hidden
            
            #line 850 "CodeGenerator.Array.tt"
  if (CanEnumerateAsSpecificType)
    { 
            
            #line default
            #line hidden
            
            #line 852 "CodeGenerator.Array.tt"
            this.Write("    /// <inheritdoc/>\r\n    public JsonArrayEnumerator<");
            
            #line default
            #line hidden
            
            #line 853 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 853 "CodeGenerator.Array.tt"
            this.Write("> EnumerateArray()\r\n    {\r\n        if ((this.backing & Backing.JsonElement) != 0)" +
                    "\r\n        {\r\n            return new JsonArrayEnumerator<");
            
            #line default
            #line hidden
            
            #line 857 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 857 "CodeGenerator.Array.tt"
            this.Write(">(this.jsonElementBacking);\r\n        }\r\n\r\n        if ((this.backing & Backing.Arr" +
                    "ay) != 0)\r\n        {\r\n            return new JsonArrayEnumerator<");
            
            #line default
            #line hidden
            
            #line 862 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( SingleItemsDotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 862 "CodeGenerator.Array.tt"
            this.Write(">(this.arrayBacking);\r\n        }\r\n\r\n        throw new InvalidOperationException()" +
                    ";\r\n    }\r\n");
            
            #line default
            #line hidden
            
            #line 867 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 868 "CodeGenerator.Array.tt"
            this.Write("\r\n    /// <inheritdoc/>\r\n");
            
            #line default
            #line hidden
            
            #line 870 "CodeGenerator.Array.tt"
  if (CanEnumerateAsSpecificType)
    { 
            
            #line default
            #line hidden
            
            #line 872 "CodeGenerator.Array.tt"
            this.Write("    JsonArrayEnumerator IJsonArray<");
            
            #line default
            #line hidden
            
            #line 872 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 872 "CodeGenerator.Array.tt"
            this.Write(">.EnumerateArray()\r\n");
            
            #line default
            #line hidden
            
            #line 873 "CodeGenerator.Array.tt"
  }
    else
    { 
            
            #line default
            #line hidden
            
            #line 876 "CodeGenerator.Array.tt"
            this.Write("    public JsonArrayEnumerator EnumerateArray()\r\n");
            
            #line default
            #line hidden
            
            #line 877 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 878 "CodeGenerator.Array.tt"
            this.Write(@"    {
        if ((this.backing & Backing.JsonElement) != 0)
        {
            return new JsonArrayEnumerator(this.jsonElementBacking);
        }

        if ((this.backing & Backing.Array) != 0)
        {
            return new JsonArrayEnumerator(this.arrayBacking);
        }

        throw new InvalidOperationException();
    }

    /// <inheritdoc/>

");
            
            #line default
            #line hidden
            
            #line 894 "CodeGenerator.Array.tt"
  if (CanEnumerateAsSpecificType || IsTuple)
    { 
            
            #line default
            #line hidden
            
            #line 896 "CodeGenerator.Array.tt"
            this.Write("    JsonArrayEnumerator<TItem> IJsonArray<");
            
            #line default
            #line hidden
            
            #line 896 "CodeGenerator.Array.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( TypeDeclaration.DotnetTypeName ));
            
            #line default
            #line hidden
            
            #line 896 "CodeGenerator.Array.tt"
            this.Write(">.EnumerateArray<TItem>()\r\n");
            
            #line default
            #line hidden
            
            #line 897 "CodeGenerator.Array.tt"
  }
    else
    { 
            
            #line default
            #line hidden
            
            #line 900 "CodeGenerator.Array.tt"
            this.Write("    public JsonArrayEnumerator<TItem> EnumerateArray<TItem>()\r\n        where TIte" +
                    "m : struct, IJsonValue<TItem>\r\n");
            
            #line default
            #line hidden
            
            #line 902 "CodeGenerator.Array.tt"
  } 
            
            #line default
            #line hidden
            
            #line 903 "CodeGenerator.Array.tt"
            this.Write("    {\r\n        if ((this.backing & Backing.JsonElement) != 0)\r\n        {\r\n       " +
                    "     return new JsonArrayEnumerator<TItem>(this.jsonElementBacking);\r\n        }\r" +
                    "\n\r\n        if ((this.backing & Backing.Array) != 0)\r\n        {\r\n            retu" +
                    "rn new JsonArrayEnumerator<TItem>(this.arrayBacking);\r\n        }\r\n\r\n        thro" +
                    "w new InvalidOperationException();\r\n    }\r\n\r\n    /// <summary>\r\n    /// Builds a" +
                    "n <see cref=\"ImmutableList{JsonAny}\"/> from the array.\r\n    /// </summary>\r\n    " +
                    "/// <returns>An immutable list of <see cref=\"JsonAny\"/> built from the array.</r" +
                    "eturns>\r\n    /// <exception cref=\"InvalidOperationException\">The value is not an" +
                    " array.</exception>\r\n    private ImmutableList<JsonAny> GetImmutableList()\r\n    " +
                    "{\r\n        if ((this.backing & Backing.Array) != 0)\r\n        {\r\n            retu" +
                    "rn this.arrayBacking;\r\n        }\r\n\r\n        return this.GetImmutableListBuilder(" +
                    ").ToImmutable();\r\n    }\r\n\r\n    /// <summary>\r\n    /// Builds an <see cref=\"Immut" +
                    "ableList{JsonAny}.Builder\"/> from the array.\r\n    /// </summary>\r\n    /// <retur" +
                    "ns>An immutable list builder of <see cref=\"JsonAny\"/>, built from the existing a" +
                    "rray.</returns>\r\n    /// <exception cref=\"InvalidOperationException\">The value i" +
                    "s not an array.</exception>\r\n    private ImmutableList<JsonAny>.Builder GetImmut" +
                    "ableListBuilder()\r\n    {\r\n        if ((this.backing & Backing.JsonElement) != 0 " +
                    "&& this.jsonElementBacking.ValueKind == JsonValueKind.Array)\r\n        {\r\n       " +
                    "     ImmutableList<JsonAny>.Builder builder = ImmutableList.CreateBuilder<JsonAn" +
                    "y>();\r\n            foreach (JsonElement item in this.jsonElementBacking.Enumerat" +
                    "eArray())\r\n            {\r\n                builder.Add(new(item));\r\n            }" +
                    "\r\n\r\n            return builder;\r\n        }\r\n\r\n        if ((this.backing & Backin" +
                    "g.Array) != 0)\r\n        {\r\n            return this.arrayBacking.ToBuilder();\r\n  " +
                    "      }\r\n\r\n        throw new InvalidOperationException();\r\n    }\r\n\r\n    /// <sum" +
                    "mary>\r\n    /// Builds an <see cref=\"ImmutableList{JsonAny}\"/> from the array, re" +
                    "placing the item at the specified index with the given item.\r\n    /// </summary>" +
                    "\r\n    /// <param name=\"index\">The index at which to add the element.</param>\r\n  " +
                    "  /// <param name=\"value\">The value to add.</param>\r\n    /// <returns>An immutab" +
                    "le list containing the contents of the list, with the specified item at the inde" +
                    "x.</returns>\r\n    /// <exception cref=\"InvalidOperationException\">The value is n" +
                    "ot an array.</exception>\r\n    /// <exception cref=\"IndexOutOfRangeException\">Thr" +
                    "own if the range is beyond the bounds of the array.</exception>\r\n    private Imm" +
                    "utableList<JsonAny> GetImmutableListSetting(int index, in JsonAny value)\r\n    {\r" +
                    "\n        if ((this.backing & Backing.JsonElement) != 0 && this.jsonElementBackin" +
                    "g.ValueKind == JsonValueKind.Array)\r\n        {\r\n            return JsonValueHelp" +
                    "ers.GetImmutableListFromJsonElementSetting(this.jsonElementBacking, index, value" +
                    ");\r\n        }\r\n\r\n        if ((this.backing & Backing.Array) != 0)\r\n        {\r\n  " +
                    "          try\r\n            {\r\n                return this.arrayBacking.SetItem(i" +
                    "ndex, value);\r\n            }\r\n            catch (ArgumentOutOfRangeException ex)" +
                    "\r\n            {\r\n                throw new IndexOutOfRangeException(ex.Message, " +
                    "ex);\r\n            }\r\n        }\r\n\r\n        throw new InvalidOperationException();" +
                    "\r\n    }\r\n\r\n    /// <summary>\r\n    /// Builds an <see cref=\"ImmutableList{JsonAny" +
                    "}\"/> from the array, removing the first item that equals the given value, and re" +
                    "placing it with the specified item.\r\n    /// </summary>\r\n    /// <param name=\"ol" +
                    "dItem\">The item to remove.</param>\r\n    /// <param name=\"newItem\">The item to in" +
                    "sert.</param>\r\n    /// <returns>An immutable list containing the contents of the" +
                    " list, without the first instance that matches the old item, replacing it with t" +
                    "he new item.</returns>\r\n    /// <exception cref=\"InvalidOperationException\">The " +
                    "value is not an array.</exception>\r\n    private ImmutableList<JsonAny> GetImmuta" +
                    "bleListReplacing(in JsonAny oldItem, in JsonAny newItem)\r\n    {\r\n        if ((th" +
                    "is.backing & Backing.JsonElement) != 0 && this.jsonElementBacking.ValueKind == J" +
                    "sonValueKind.Array)\r\n        {\r\n            return JsonValueHelpers.GetImmutable" +
                    "ListFromJsonElementReplacing(this.jsonElementBacking, oldItem, newItem);\r\n      " +
                    "  }\r\n\r\n        if ((this.backing & Backing.Array) != 0)\r\n        {\r\n            " +
                    "return this.arrayBacking.Replace(oldItem, newItem);\r\n        }\r\n\r\n        throw " +
                    "new InvalidOperationException();\r\n    }\r\n\r\n    /// <summary>\r\n    /// Builds an " +
                    "<see cref=\"ImmutableList{JsonAny}\"/> from the array, removing the first item tha" +
                    "t equals the given value.\r\n    /// </summary>\r\n    /// <param name=\"item\">The it" +
                    "em to remove.</param>\r\n    /// <returns>An immutable list containing the content" +
                    "s of the list, without the first instance that matches the given item.</returns>" +
                    "\r\n    /// <exception cref=\"InvalidOperationException\">The value is not an array." +
                    "</exception>\r\n    private ImmutableList<JsonAny> GetImmutableListWithout(in Json" +
                    "Any item)\r\n    {\r\n        if ((this.backing & Backing.JsonElement) != 0 && this." +
                    "jsonElementBacking.ValueKind == JsonValueKind.Array)\r\n        {\r\n            ret" +
                    "urn JsonValueHelpers.GetImmutableListFromJsonElementWithout(this.jsonElementBack" +
                    "ing, item);\r\n        }\r\n\r\n        if ((this.backing & Backing.Array) != 0)\r\n    " +
                    "    {\r\n            return this.arrayBacking.Remove(item);\r\n        }\r\n\r\n        " +
                    "throw new InvalidOperationException();\r\n    }\r\n\r\n    /// <summary>\r\n    /// Buil" +
                    "ds an <see cref=\"ImmutableList{JsonAny}\"/> from the array, removing the given ra" +
                    "nge.\r\n    /// </summary>\r\n    /// <param name=\"index\">The start index of the ran" +
                    "ge to remove.</param>\r\n    /// <param name=\"count\">The length of the range to re" +
                    "move.</param>\r\n    /// <returns>An immutable list containing the contents of the" +
                    " list, without the given range of items.</returns>\r\n    /// <exception cref=\"Inv" +
                    "alidOperationException\">The value is not an array.</exception>\r\n    /// <excepti" +
                    "on cref=\"IndexOutOfRangeException\">Thrown if the range is beyond the bounds of t" +
                    "he array.</exception>\r\n    private ImmutableList<JsonAny> GetImmutableListWithou" +
                    "tRange(int index, int count)\r\n    {\r\n        if ((this.backing & Backing.JsonEle" +
                    "ment) != 0 && this.jsonElementBacking.ValueKind == JsonValueKind.Array)\r\n       " +
                    " {\r\n            return JsonValueHelpers.GetImmutableListFromJsonElementWithoutRa" +
                    "nge(this.jsonElementBacking, index, count);\r\n        }\r\n\r\n        if ((this.back" +
                    "ing & Backing.Array) != 0)\r\n        {\r\n            try\r\n            {\r\n         " +
                    "       return this.arrayBacking.RemoveRange(index, count);\r\n            }\r\n     " +
                    "       catch (ArgumentOutOfRangeException ex)\r\n            {\r\n                th" +
                    "row new IndexOutOfRangeException(ex.Message, ex);\r\n            }\r\n        }\r\n\r\n " +
                    "       throw new InvalidOperationException();\r\n    }\r\n\r\n    /// <summary>\r\n    /" +
                    "// Builds an <see cref=\"ImmutableList{JsonAny}\"/> from the array, adding the giv" +
                    "en item.\r\n    /// </summary>\r\n    /// <param name=\"index\">The index at which to " +
                    "add the element.</param>\r\n    /// <param name=\"value\">The value to add.</param>\r" +
                    "\n    /// <returns>An immutable list containing the contents of the list, without" +
                    " the array.</returns>\r\n    /// <exception cref=\"InvalidOperationException\">The v" +
                    "alue is not an array.</exception>\r\n    /// <exception cref=\"IndexOutOfRangeExcep" +
                    "tion\">Thrown if the range is beyond the bounds of the array.</exception>\r\n    pr" +
                    "ivate ImmutableList<JsonAny> GetImmutableListWith(int index, in JsonAny value)\r\n" +
                    "    {\r\n        if ((this.backing & Backing.JsonElement) != 0 && this.jsonElement" +
                    "Backing.ValueKind == JsonValueKind.Array)\r\n        {\r\n            return JsonVal" +
                    "ueHelpers.GetImmutableListFromJsonElementWith(this.jsonElementBacking, index, va" +
                    "lue);\r\n        }\r\n\r\n        if ((this.backing & Backing.Array) != 0)\r\n        {\r" +
                    "\n            try\r\n            {\r\n                return this.arrayBacking.Insert" +
                    "(index, value);\r\n            }\r\n            catch (ArgumentOutOfRangeException e" +
                    "x)\r\n            {\r\n                throw new IndexOutOfRangeException(ex.Message" +
                    ", ex);\r\n            }\r\n        }\r\n\r\n        throw new InvalidOperationException(" +
                    ");\r\n    }\r\n\r\n    /// <summary>\r\n    /// Builds an <see cref=\"ImmutableList{JsonA" +
                    "ny}\"/> from the array, adding the given item.\r\n    /// </summary>\r\n    /// <para" +
                    "m name=\"index\">The index at which to add the element.</param>\r\n    /// <param na" +
                    "me=\"values\">The values to add.</param>\r\n    /// <returns>An immutable list conta" +
                    "ining the contents of the list, without the array.</returns>\r\n    /// <exception" +
                    " cref=\"InvalidOperationException\">The value is not an array.</exception>\r\n    //" +
                    "/ <exception cref=\"IndexOutOfRangeException\">Thrown if the range is beyond the b" +
                    "ounds of the array.</exception>\r\n    private ImmutableList<JsonAny> GetImmutable" +
                    "ListWith<TEnumerable>(int index, TEnumerable values)\r\n        where TEnumerable " +
                    ": IEnumerable<JsonAny>\r\n    {\r\n        if ((this.backing & Backing.JsonElement) " +
                    "!= 0 && this.jsonElementBacking.ValueKind == JsonValueKind.Array)\r\n        {\r\n  " +
                    "          return JsonValueHelpers.GetImmutableListFromJsonElementWith(this.jsonE" +
                    "lementBacking, index, values);\r\n        }\r\n\r\n        if ((this.backing & Backing" +
                    ".Array) != 0)\r\n        {\r\n            try\r\n            {\r\n                return" +
                    " this.arrayBacking.InsertRange(index, values);\r\n            }\r\n            catch" +
                    " (ArgumentOutOfRangeException ex)\r\n            {\r\n                throw new Inde" +
                    "xOutOfRangeException(ex.Message, ex);\r\n            }\r\n        }\r\n\r\n        throw" +
                    " new InvalidOperationException();\r\n    }\r\n}\r\n");
            
            #line default
            #line hidden
            
            #line 1122 "CodeGenerator.Array.tt"
 EndNesting(); 
            
            #line default
            #line hidden
            return this.GenerationEnvironment.ToString();
        }
        
        public virtual void Initialize() {
        }
    }
    
    public class CodeGeneratorArrayBase {
        
        private global::System.Text.StringBuilder builder;
        
        private global::System.Collections.Generic.IDictionary<string, object> session;
        
        private global::System.CodeDom.Compiler.CompilerErrorCollection errors;
        
        private string currentIndent = string.Empty;
        
        private global::System.Collections.Generic.Stack<int> indents;
        
        private ToStringInstanceHelper _toStringHelper = new ToStringInstanceHelper();
        
        public virtual global::System.Collections.Generic.IDictionary<string, object> Session {
            get {
                return this.session;
            }
            set {
                this.session = value;
            }
        }
        
        public global::System.Text.StringBuilder GenerationEnvironment {
            get {
                if ((this.builder == null)) {
                    this.builder = new global::System.Text.StringBuilder();
                }
                return this.builder;
            }
            set {
                this.builder = value;
            }
        }
        
        protected global::System.CodeDom.Compiler.CompilerErrorCollection Errors {
            get {
                if ((this.errors == null)) {
                    this.errors = new global::System.CodeDom.Compiler.CompilerErrorCollection();
                }
                return this.errors;
            }
        }
        
        public string CurrentIndent {
            get {
                return this.currentIndent;
            }
        }
        
        private global::System.Collections.Generic.Stack<int> Indents {
            get {
                if ((this.indents == null)) {
                    this.indents = new global::System.Collections.Generic.Stack<int>();
                }
                return this.indents;
            }
        }
        
        public ToStringInstanceHelper ToStringHelper {
            get {
                return this._toStringHelper;
            }
        }
        
        public void Error(string message) {
            this.Errors.Add(new global::System.CodeDom.Compiler.CompilerError(null, -1, -1, null, message));
        }
        
        public void Warning(string message) {
            global::System.CodeDom.Compiler.CompilerError val = new global::System.CodeDom.Compiler.CompilerError(null, -1, -1, null, message);
            val.IsWarning = true;
            this.Errors.Add(val);
        }
        
        public string PopIndent() {
            if ((this.Indents.Count == 0)) {
                return string.Empty;
            }
            int lastPos = (this.currentIndent.Length - this.Indents.Pop());
            string last = this.currentIndent.Substring(lastPos);
            this.currentIndent = this.currentIndent.Substring(0, lastPos);
            return last;
        }
        
        public void PushIndent(string indent) {
            this.Indents.Push(indent.Length);
            this.currentIndent = (this.currentIndent + indent);
        }
        
        public void ClearIndent() {
            this.currentIndent = string.Empty;
            this.Indents.Clear();
        }
        
        public void Write(string textToAppend) {
            this.GenerationEnvironment.Append(textToAppend);
        }
        
        public void Write(string format, params object[] args) {
            this.GenerationEnvironment.AppendFormat(format, args);
        }
        
        public void WriteLine(string textToAppend) {
            this.GenerationEnvironment.Append(this.currentIndent);
            this.GenerationEnvironment.AppendLine(textToAppend);
        }
        
        public void WriteLine(string format, params object[] args) {
            this.GenerationEnvironment.Append(this.currentIndent);
            this.GenerationEnvironment.AppendFormat(format, args);
            this.GenerationEnvironment.AppendLine();
        }
        
        public class ToStringInstanceHelper {
            
            private global::System.IFormatProvider formatProvider = global::System.Globalization.CultureInfo.InvariantCulture;
            
            public global::System.IFormatProvider FormatProvider {
                get {
                    return this.formatProvider;
                }
                set {
                    if ((value != null)) {
                        this.formatProvider = value;
                    }
                }
            }
            
            public string ToStringWithCulture(object objectToConvert) {
                if ((objectToConvert == null)) {
                    throw new global::System.ArgumentNullException("objectToConvert");
                }
                global::System.Type type = objectToConvert.GetType();
                global::System.Type iConvertibleType = typeof(global::System.IConvertible);
                if (iConvertibleType.IsAssignableFrom(type)) {
                    return ((global::System.IConvertible)(objectToConvert)).ToString(this.formatProvider);
                }
                global::System.Reflection.MethodInfo methInfo = type.GetMethod("ToString", new global::System.Type[] {
                            iConvertibleType});
                if ((methInfo != null)) {
                    return ((string)(methInfo.Invoke(objectToConvert, new object[] {
                                this.formatProvider})));
                }
                return objectToConvert.ToString();
            }
        }
    }
}
